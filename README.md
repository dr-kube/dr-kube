# DR-Kube ğŸš€

> **D**isaster **R**ecovery for **Kube**rnetes - AI ê¸°ë°˜ Kubernetes ì¥ì•  ìë™ ë³µêµ¬ ì‹œìŠ¤í…œ

[![ArgoCD](https://img.shields.io/badge/ArgoCD-GitOps-blue?logo=argo)](https://argoproj.github.io/cd/)
[![LangGraph](https://img.shields.io/badge/LangGraph-AI%20Agent-green?logo=langchain)](https://langchain-ai.github.io/langgraph/)
[![Kubernetes](https://img.shields.io/badge/Kubernetes-Container%20Orchestration-326CE5?logo=kubernetes)](https://kubernetes.io/)

## ğŸ“‹ ê°œìš”

DR-KubeëŠ” Kubernetes í´ëŸ¬ìŠ¤í„°ì—ì„œ ë°œìƒí•˜ëŠ” ì¥ì• ë¥¼ **ìë™ìœ¼ë¡œ ê°ì§€, ë¶„ì„, ë³µêµ¬**í•˜ëŠ” AI ê¸°ë°˜ DevOps ìë™í™” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. LangGraphë¥¼ í™œìš©í•œ ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸ê°€ ë¡œê·¸ë¥¼ ë¶„ì„í•˜ê³ , GitOps íŒ¨í„´(App of Apps)ì„ í†µí•´ ì•ˆì „í•˜ê²Œ ë³µêµ¬ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

- **ğŸ” ìë™ ì¥ì•  ê°ì§€**: ë¡œê·¸ ë¶„ì„ì„ í†µí•œ OOM, CrashLoop, ì„¤ì • ì˜¤ë¥˜ ë“± ë‹¤ì–‘í•œ ì¥ì•  ìœ í˜• ìë™ ë¶„ë¥˜
- **ğŸ§  AI ê¸°ë°˜ ì›ì¸ ë¶„ì„**: LLMì„ í™œìš©í•œ ê·¼ë³¸ ì›ì¸ ë¶„ì„ ë° ë³µêµ¬ ì•¡ì…˜ ì œì•ˆ
- **ğŸ”„ GitOps ìë™ ë³µêµ¬**: ArgoCD App of Apps íŒ¨í„´ì„ í™œìš©í•œ ìë™ ë³µêµ¬ ì»¤ë°‹
- **ğŸ“Š í†µí•© ëª¨ë‹ˆí„°ë§**: Grafana, Prometheus, Loki, Alloyë¥¼ í†µí•œ í†µí•© ê´€ì¸¡ì„±(Observability)
- **ğŸ§ª ì¹´ì˜¤ìŠ¤ ì—”ì§€ë‹ˆì–´ë§**: Chaos Meshë¥¼ í†µí•œ ì¥ì•  ì‹œë®¬ë ˆì´ì…˜ ë° ë³µì›ë ¥ í…ŒìŠ¤íŠ¸

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DR-Kube System                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Grafana    â”‚â—„â”€â”€â”€â”‚    Loki      â”‚â—„â”€â”€â”€â”‚    Alloy     â”‚â—„â”€â”€ Kubernetes    â”‚
â”‚  â”‚  Dashboard   â”‚    â”‚   (Logs)     â”‚    â”‚  (Collector) â”‚    Cluster       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                   â”‚                                                â”‚
â”‚         â–¼                   â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚          LangGraph Agent               â”‚                                 â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                 â”‚
â”‚  â”‚  â”‚ ë¡œê·¸   â”‚â†’â”‚ ì—ëŸ¬   â”‚â†’â”‚ ì›ì¸ ë¶„ì„  â”‚ â”‚                                 â”‚
â”‚  â”‚  â”‚ ìˆ˜ì§‘   â”‚ â”‚ ë¶„ë¥˜   â”‚ â”‚            â”‚ â”‚                                 â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                 â”‚
â”‚  â”‚       â”‚           â”‚           â”‚       â”‚                                 â”‚
â”‚  â”‚       â–¼           â–¼           â–¼       â”‚                                 â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                 â”‚
â”‚  â”‚  â”‚ í”¼ë“œë°± â”‚â†â”‚ ë³µêµ¬   â”‚â†â”‚ ì•¡ì…˜ ìƒì„±  â”‚ â”‚                                 â”‚
â”‚  â”‚  â”‚        â”‚ â”‚ ê²€ì¦   â”‚ â”‚ & Git ì»¤ë°‹ â”‚ â”‚                                 â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                        â”‚                                                     â”‚
â”‚                        â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                    GitOps (ArgoCD)                                â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚       â”‚
â”‚  â”‚  â”‚ Application â”‚  â”‚ Application â”‚  â”‚ Application â”‚   ...         â”‚       â”‚
â”‚  â”‚  â”‚  (Grafana)  â”‚  â”‚ (Prometheus)â”‚  â”‚   (Loki)    â”‚               â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚       â”‚
â”‚  â”‚                    App of Apps Pattern                            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
dr-kube/
â”œâ”€â”€ README.md                 # ì´ íŒŒì¼
â”œâ”€â”€ applications/             # ArgoCD Application ì •ì˜ (App of Apps)
â”‚   â”œâ”€â”€ alloy.yaml           # Grafana Alloy (ë¡œê·¸/ë©”íŠ¸ë¦­ ìˆ˜ì§‘)
â”‚   â”œâ”€â”€ argocd.yaml          # ArgoCD
â”‚   â”œâ”€â”€ chaos-mesh.yaml      # Chaos Mesh (ì¹´ì˜¤ìŠ¤ ì—”ì§€ë‹ˆì–´ë§)
â”‚   â”œâ”€â”€ grafana.yaml         # Grafana Dashboard
â”‚   â”œâ”€â”€ loki.yaml            # Loki (ë¡œê·¸ ì €ì¥)
â”‚   â”œâ”€â”€ nginx-ingress.yaml   # Nginx Ingress Controller
â”‚   â””â”€â”€ prometheus.yaml      # Prometheus (ë©”íŠ¸ë¦­)
â”œâ”€â”€ values/                   # Helm Values íŒŒì¼
â”‚   â”œâ”€â”€ alloy.yaml
â”‚   â”œâ”€â”€ argocd.yaml
â”‚   â”œâ”€â”€ chaos-mesh.yaml
â”‚   â”œâ”€â”€ grafana.yaml
â”‚   â”œâ”€â”€ loki.yaml
â”‚   â”œâ”€â”€ nginx-ingress.yaml
â”‚   â””â”€â”€ prometheus.yaml
â”œâ”€â”€ manifests/                # Kubernetes ë§¤ë‹ˆí˜ìŠ¤íŠ¸
â”‚   â”œâ”€â”€ application-root.yaml # Root Application (App of Apps)
â”‚   â””â”€â”€ ingress.yaml         # Ingress ì„¤ì •
â”œâ”€â”€ langraph/                 # LangGraph ì¥ì•  ëŒ€ì‘ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ agents/              # LangGraph ë…¸ë“œ ë° ê·¸ë˜í”„
â”‚   â”œâ”€â”€ cli/                 # CLI ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ config/              # ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ models/              # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ services/            # ì„œë¹„ìŠ¤ ë ˆì´ì–´
â”‚   â””â”€â”€ examples/            # ì˜ˆì‹œ ë¡œê·¸ íŒŒì¼
â””â”€â”€ docs/                     # ë¬¸ì„œ
    â”œâ”€â”€ ALLOY_CONFIG.md      # Alloy ì„¤ì • ê°€ì´ë“œ
    â””â”€â”€ CHAOS_MESH_TOKEN.md  # Chaos Mesh í† í° ê´€ë¦¬
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Kubernetes í´ëŸ¬ìŠ¤í„° (1.25+)
- ArgoCD ì„¤ì¹˜
- Python 3.10+
- Git

### 1. ArgoCD App of Apps ë°°í¬

```bash
# Root Application ë°°í¬ (ëª¨ë“  ì•± ìë™ ë°°í¬)
kubectl apply -f manifests/application-root.yaml
```

### 2. LangGraph ì—ì´ì „íŠ¸ ì„¤ì •

```bash
# langraph ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd langraph

# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv venv
source venv/bin/activate  # Linux/Mac

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘
```

### 3. ì¥ì•  ëŒ€ì‘ ì—ì´ì „íŠ¸ ì‹¤í–‰

```bash
# Dry-run ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸ (ê¶Œì¥)
python -m cli.main --log-file examples/sample_log_oom.txt --dry-run

# ì‹¤ì œ ì‹¤í–‰ (Git ì»¤ë°‹ í¬í•¨)
python -m cli.main --log-file examples/sample_log_oom.txt --repo-root ..
```

## ğŸ”§ ì§€ì›í•˜ëŠ” ì¥ì•  ìœ í˜•

| ì¹´í…Œê³ ë¦¬ | ì„¤ëª… | ìë™ ë³µêµ¬ ì•¡ì…˜ |
|---------|------|---------------|
| `oom` | Out of Memory | ë©”ëª¨ë¦¬ ë¦¬ì†ŒìŠ¤ ì œí•œ ì¦ê°€ |
| `crashloop` | CrashLoopBackOff | ì´ë¯¸ì§€ íƒœê·¸ ìˆ˜ì •, ì˜ì¡´ì„± í™•ì¸ |
| `config_error` | ì„¤ì • ì˜¤ë¥˜ | values.yaml ìˆ˜ì • |
| `resource_exhausted` | ë¦¬ì†ŒìŠ¤ ë¶€ì¡± | ë¦¬ì†ŒìŠ¤ ì¿¼í„° ì¡°ì • |
| `network_error` | ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ | ë„¤íŠ¸ì›Œí¬ ì •ì±… ìˆ˜ì • |
| `image_pull_error` | ì´ë¯¸ì§€ í’€ ì‹¤íŒ¨ | ì´ë¯¸ì§€ íƒœê·¸/ë ˆì§€ìŠ¤íŠ¸ë¦¬ ìˆ˜ì • |
| `scheduling_error` | ìŠ¤ì¼€ì¤„ë§ ì‹¤íŒ¨ | Affinity/Toleration ì¡°ì • |

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | í¬íŠ¸ |
|---------|------|------|
| **Grafana** | ëŒ€ì‹œë³´ë“œ & ì‹œê°í™” | 3000 |
| **Prometheus** | ë©”íŠ¸ë¦­ ìˆ˜ì§‘ & ì €ì¥ | 9090 |
| **Loki** | ë¡œê·¸ ì§‘ê³„ & ì¿¼ë¦¬ | 3100 |
| **Alloy** | ë¡œê·¸/ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì—ì´ì „íŠ¸ | 12345 |
| **Chaos Mesh** | ì¹´ì˜¤ìŠ¤ ì—”ì§€ë‹ˆì–´ë§ | 2333 |

## ğŸ§ª ì¹´ì˜¤ìŠ¤ ì—”ì§€ë‹ˆì–´ë§

Chaos Meshë¥¼ í™œìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì¥ì•  ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# Dashboard í† í° ìƒì„±
kubectl create token chaos-dashboard -n chaos-mesh --duration=87600h

# í† í°ì„ Secretìœ¼ë¡œ ì €ì¥
TOKEN=$(kubectl create token chaos-dashboard -n chaos-mesh --duration=87600h)
kubectl create secret generic chaos-dashboard-token -n chaos-mesh \
  --from-literal=token="$TOKEN"
```

ìì„¸í•œ ë‚´ìš©ì€ [Chaos Mesh í† í° ê´€ë¦¬](./docs/CHAOS_MESH_TOKEN.md) ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

## ğŸ”„ LangGraph ì›Œí¬í”Œë¡œìš°

```
ë¡œê·¸ ì…ë ¥ â†’ ì—ëŸ¬ ë¶„ë¥˜ â†’ ì›ì¸ ë¶„ì„ â†’ ì‚¬ìš©ì í”¼ë“œë°± â†’ ì•¡ì…˜ ìƒì„± â†’ Git ì»¤ë°‹ â†’ ë³µêµ¬ ê²€ì¦ â†’ ìµœì¢… í”¼ë“œë°±
```

1. **ë¡œê·¸ ìˆ˜ì§‘**: ë¡œì»¬ íŒŒì¼ ë˜ëŠ” Lokiì—ì„œ ë¡œê·¸ ìˆ˜ì§‘
2. **ì—ëŸ¬ ë¶„ë¥˜**: í‚¤ì›Œë“œ/íŒ¨í„´ ê¸°ë°˜ ì—ëŸ¬ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
3. **ê·¼ë³¸ ì›ì¸ ë¶„ì„**: ì—ëŸ¬ ì¹´í…Œê³ ë¦¬ ê¸°ë°˜ ì›ì¸ ë¶„ì„
4. **ì‚¬ìš©ì í”¼ë“œë°±**: ë¶„ì„ ê²°ê³¼ í™•ì¸ (ìë™/ìˆ˜ë™)
5. **ì•¡ì…˜ ìƒì„±**: values.yaml ìˆ˜ì • ì‚¬í•­ ìƒì„±
6. **Git ì»¤ë°‹**: ë³€ê²½ì‚¬í•­ ì»¤ë°‹ (ArgoCD ìë™ ë™ê¸°í™”)
7. **ë³µêµ¬ ê²€ì¦**: Kubernetes ìƒíƒœ í™•ì¸
8. **ìµœì¢… í”¼ë“œë°±**: ê²°ê³¼ ë³´ê³ 

## ğŸ“š ë¬¸ì„œ

- [Alloy ì„¤ì • ê°€ì´ë“œ](./docs/ALLOY_CONFIG.md)
- [Chaos Mesh í† í° ê´€ë¦¬](./docs/CHAOS_MESH_TOKEN.md)
- [LangGraph ìƒì„¸ ê³„íš](./langraph/PLAN.md)
- [ì§€ì†ì  ëª¨ë‹ˆí„°ë§ ê³„íš](./langraph/PLAN_CONTINUOUS_MONITORING.md)

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜**: Kubernetes
- **GitOps**: ArgoCD (App of Apps íŒ¨í„´)
- **AI/ML**: LangGraph, LangChain, OpenAI/Anthropic LLM
- **ëª¨ë‹ˆí„°ë§**: Grafana, Prometheus, Loki, Alloy
- **ì¹´ì˜¤ìŠ¤ ì—”ì§€ë‹ˆì–´ë§**: Chaos Mesh
- **ì–¸ì–´**: Python 3.10+, YAML
- **CI/CD**: Git ê¸°ë°˜ ìë™í™”

## ğŸ¤ ê¸°ì—¬ ë°©ë²•

1. ì´ ì €ì¥ì†Œë¥¼ Forkí•©ë‹ˆë‹¤
2. ìƒˆ Feature ë¸Œëœì¹˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤ (`git checkout -b feature/amazing-feature`)
3. ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•©ë‹ˆë‹¤ (`git commit -m 'Add amazing feature'`)
4. ë¸Œëœì¹˜ì— Pushí•©ë‹ˆë‹¤ (`git push origin feature/amazing-feature`)
5. Pull Requestë¥¼ ìƒì„±í•©ë‹ˆë‹¤

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”.
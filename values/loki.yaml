# 개발환경용 심플한 Prometheus 설정
deploymentMode: SingleBinary

loki:
  auth_enabled: false
  podSecurityContext:
    runAsUser: 0
    runAsGroup: 0
    fsGroup: 0
    runAsNonRoot: false

  commonConfig:
    replication_factor: 1

  # ★ 여기가 헬름 chart에서 보는 storage 설정
  storage:
    type: filesystem
    filesystem:
      chunks_directory: /var/loki/chunks
      rules_directory: /var/loki/rules

  # Loki 내부 schema 설정 (object_store = filesystem)
  schemaConfig:
    configs:
      - from: "2025-12-15"
        store: tsdb
        object_store: filesystem
        schema: v13
        index:
          prefix: loki_index_
          period: 24h

  pattern_ingester:
    enabled: true

  limits_config:
    allow_structured_metadata: true
    volume_enabled: true
    retention_period: 672h

#  rulerConfig:
#    storage:
#      type: local

singleBinary:
  replicas: 1
  persistence:
    enabled: true
    size: 10Gi
    storageClass: csi-storageclass

resultsCache:
  enabled: false

chunksCache:
  enabled: false
  persistence:
    # -- Enable creating PVCs for the chunks-cache
    enabled: true
    # -- Size of persistent disk, must be in G or Gi
    storageSize: 10Gi
    storageClass: csi-storageclass

write:
  replicas: 0
read:
  replicas: 0
backend:
  replicas: 0

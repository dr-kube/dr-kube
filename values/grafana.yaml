adminUser: admin
adminPassword: drkube

service:
  type: ClusterIP

ingress:
  enabled: true
  ingressClassName: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
  hosts:
    - grafana.drkube.local
    - grafana.drkube.huik.site
  path: /
  pathType: Prefix
  tls:
    - secretName: grafana-tls
      hosts:
        - grafana.drkube.huik.site

persistence:
  enabled: true
  storageClassName: standard
  size: 10Gi

datasources:
  datasources.yaml:
    apiVersion: 1
    deleteDatasources:
      - name: Loki
        orgId: 1
      - name: Prometheus
        orgId: 1
      - name: Jaeger
        orgId: 1
    datasources:
      # Loki ÏÑ§Ï†ï
      - name: Loki
        type: loki
        uid: loki-uid
        url: http://loki:3100
        access: proxy
        jsonData:
          derivedFields:
            - datasourceUid: jaeger-uid
              matcherRegex: "traceID=(\\w+)"
              name: TraceID
              url: "$${__value.raw}"
      # Prometheus ÏÑ§Ï†ï
      - name: Prometheus
        type: prometheus
        uid: prometheus-uid
        url: http://prometheus-server
        access: proxy
      # Jaeger ÏÑ§Ï†ï
      - name: Jaeger
        type: jaeger
        uid: jaeger-uid
        url: http://jaeger-query:16686
        access: proxy
        jsonData:
          tracesToLogsV2:
            datasourceUid: loki-uid
            filterByTraceID: true
            filterBySpanID: true
          tracesToMetrics:
            datasourceUid: prometheus-uid
            queries:
              - name: Request Rate
                query: "sum(rate(http_server_request_count_total{$$__tags}[5m]))"
              - name: Request Duration
                query: "histogram_quantile(0.95, sum(rate(http_server_duration_bucket{$$__tags}[5m])) by (le))"
          nodeGraph:
            enabled: true

initChownData:
  enabled: false

dashboardProviders:
  dashboardproviders.yaml:
    apiVersion: 1
    providers:
      - name: "default"
        orgId: 1
        folder: ""
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /var/lib/grafana/dashboards/default
      - name: "dr-kube"
        orgId: 1
        folder: "DR-Kube"
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /var/lib/grafana/dashboards/dr-kube

dashboards:
  default:
    kubernetes-overview:
      gnetId: 315
      revision: 3
      datasource: Prometheus
    node-exporter:
      gnetId: 1860
      revision: 37
      datasource: Prometheus
    kubernetes-cluster-monitoring:
      gnetId: 7249
      revision: 1
      datasource: Prometheus
    kubernetes-pods:
      gnetId: 6417
      revision: 1
      datasource: Prometheus
  dr-kube:
    pod-resources:
      json: |
        {
          "annotations": {"list": []},
          "editable": true,
          "panels": [
            {
              "datasource": "Prometheus",
              "title": "CPU Usage by Pod",
              "type": "timeseries",
              "gridPos": {"h": 10, "w": 24, "x": 0, "y": 0},
              "fieldConfig": {
                "defaults": {
                  "unit": "short",
                  "custom": {"drawStyle": "line", "fillOpacity": 15, "lineWidth": 2, "showPoints": "never", "stacking": {"mode": "none"}}
                }
              },
              "options": {"legend": {"displayMode": "table", "placement": "right", "calcs": ["mean","max","last"]}, "tooltip": {"mode": "multi"}},
              "targets": [
                {"expr": "sum by (namespace, pod) (rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", pod=~\"$pod\", container!=\"\", container!=\"POD\"}[2m]))", "legendFormat": "{{namespace}}/{{pod}}", "refId": "A"}
              ]
            },
            {
              "datasource": "Prometheus",
              "title": "CPU Usage vs Limit",
              "type": "timeseries",
              "gridPos": {"h": 10, "w": 12, "x": 0, "y": 10},
              "fieldConfig": {
                "defaults": {
                  "unit": "short",
                  "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 2, "showPoints": "never"}
                }
              },
              "options": {"legend": {"displayMode": "table", "placement": "bottom", "calcs": ["last"]}, "tooltip": {"mode": "multi"}},
              "targets": [
                {"expr": "sum by (namespace, pod) (rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", pod=~\"$pod\", container!=\"\", container!=\"POD\"}[2m]))", "legendFormat": "{{pod}} usage", "refId": "A"},
                {"expr": "sum by (namespace, pod) (kube_pod_container_resource_limits{namespace=~\"$namespace\", pod=~\"$pod\", resource=\"cpu\"})", "legendFormat": "{{pod}} limit", "refId": "B"}
              ]
            },
            {
              "datasource": "Prometheus",
              "title": "CPU Throttle Rate",
              "type": "timeseries",
              "gridPos": {"h": 10, "w": 12, "x": 12, "y": 10},
              "fieldConfig": {
                "defaults": {
                  "unit": "percentunit",
                  "max": 1,
                  "custom": {"drawStyle": "line", "fillOpacity": 15, "lineWidth": 2, "showPoints": "never"},
                  "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "orange", "value": 0.25}, {"color": "red", "value": 0.5}]}
                }
              },
              "options": {"legend": {"displayMode": "table", "placement": "bottom", "calcs": ["mean","max"]}, "tooltip": {"mode": "multi"}},
              "targets": [
                {"expr": "sum by (namespace, pod) (rate(container_cpu_cfs_throttled_periods_total{namespace=~\"$namespace\", pod=~\"$pod\", container!=\"\"}[5m])) / sum by (namespace, pod) (rate(container_cpu_cfs_periods_total{namespace=~\"$namespace\", pod=~\"$pod\", container!=\"\"}[5m]))", "legendFormat": "{{pod}}", "refId": "A"}
              ]
            },
            {
              "datasource": "Prometheus",
              "title": "Memory Usage by Pod",
              "type": "timeseries",
              "gridPos": {"h": 10, "w": 24, "x": 0, "y": 20},
              "fieldConfig": {
                "defaults": {
                  "unit": "bytes",
                  "custom": {"drawStyle": "line", "fillOpacity": 15, "lineWidth": 2, "showPoints": "never", "stacking": {"mode": "none"}}
                }
              },
              "options": {"legend": {"displayMode": "table", "placement": "right", "calcs": ["mean","max","last"]}, "tooltip": {"mode": "multi"}},
              "targets": [
                {"expr": "sum by (namespace, pod) (container_memory_working_set_bytes{namespace=~\"$namespace\", pod=~\"$pod\", container!=\"\", container!=\"POD\"})", "legendFormat": "{{namespace}}/{{pod}}", "refId": "A"}
              ]
            },
            {
              "datasource": "Prometheus",
              "title": "Memory Usage vs Limit",
              "type": "timeseries",
              "gridPos": {"h": 10, "w": 12, "x": 0, "y": 30},
              "fieldConfig": {
                "defaults": {
                  "unit": "bytes",
                  "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 2, "showPoints": "never"}
                }
              },
              "options": {"legend": {"displayMode": "table", "placement": "bottom", "calcs": ["last"]}, "tooltip": {"mode": "multi"}},
              "targets": [
                {"expr": "sum by (namespace, pod) (container_memory_working_set_bytes{namespace=~\"$namespace\", pod=~\"$pod\", container!=\"\", container!=\"POD\"})", "legendFormat": "{{pod}} usage", "refId": "A"},
                {"expr": "sum by (namespace, pod) (kube_pod_container_resource_limits{namespace=~\"$namespace\", pod=~\"$pod\", resource=\"memory\"})", "legendFormat": "{{pod}} limit", "refId": "B"}
              ]
            },
            {
              "datasource": "Prometheus",
              "title": "Memory Usage % of Limit",
              "type": "gauge",
              "gridPos": {"h": 10, "w": 12, "x": 12, "y": 30},
              "fieldConfig": {
                "defaults": {
                  "unit": "percentunit",
                  "min": 0, "max": 1,
                  "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "orange", "value": 0.7}, {"color": "red", "value": 0.9}]}
                }
              },
              "options": {"reduceOptions": {"calcs": ["lastNotNull"]}, "showThresholdMarkers": true},
              "targets": [
                {"expr": "sum by (pod) (container_memory_working_set_bytes{namespace=~\"$namespace\", pod=~\"$pod\", container!=\"\", container!=\"POD\"}) / sum by (pod) (kube_pod_container_resource_limits{namespace=~\"$namespace\", pod=~\"$pod\", resource=\"memory\"})", "legendFormat": "{{pod}}", "refId": "A"}
              ]
            },
            {
              "datasource": "Prometheus",
              "title": "Pod Restarts",
              "type": "timeseries",
              "gridPos": {"h": 8, "w": 12, "x": 0, "y": 40},
              "fieldConfig": {"defaults": {"unit": "short", "custom": {"drawStyle": "bars", "fillOpacity": 50, "lineWidth": 1}}},
              "options": {"legend": {"displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "multi"}},
              "targets": [
                {"expr": "increase(kube_pod_container_status_restarts_total{namespace=~\"$namespace\", pod=~\"$pod\"}[5m])", "legendFormat": "{{pod}}", "refId": "A"}
              ]
            },
            {
              "datasource": "Prometheus",
              "title": "OOMKilled Events",
              "type": "stat",
              "gridPos": {"h": 8, "w": 12, "x": 12, "y": 40},
              "fieldConfig": {
                "defaults": {
                  "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}
                }
              },
              "options": {"colorMode": "value", "graphMode": "area", "reduceOptions": {"calcs": ["lastNotNull"]}},
              "targets": [
                {"expr": "kube_pod_container_status_last_terminated_reason{namespace=~\"$namespace\", pod=~\"$pod\", reason=\"OOMKilled\"}", "legendFormat": "{{pod}}/{{container}}", "refId": "A"}
              ]
            }
          ],
          "refresh": "10s",
          "schemaVersion": 38,
          "tags": ["dr-kube", "resources", "pods"],
          "templating": {
            "list": [
              {
                "current": {"selected": true, "text": "online-boutique", "value": "online-boutique"},
                "datasource": "Prometheus",
                "definition": "label_values(kube_pod_info, namespace)",
                "name": "namespace",
                "query": "label_values(kube_pod_info, namespace)",
                "refresh": 2,
                "type": "query",
                "multi": true,
                "includeAll": true
              },
              {
                "current": {"selected": true, "text": "All", "value": "$__all"},
                "datasource": "Prometheus",
                "definition": "label_values(kube_pod_info{namespace=~\"$namespace\"}, pod)",
                "name": "pod",
                "query": "label_values(kube_pod_info{namespace=~\"$namespace\"}, pod)",
                "refresh": 2,
                "type": "query",
                "multi": true,
                "includeAll": true
              }
            ]
          },
          "time": {"from": "now-30m", "to": "now"},
          "timezone": "browser",
          "title": "Pod Resources (Real-time)",
          "uid": "dr-kube-pod-resources",
          "version": 1
        }
    dr-kube-overview:
      json: |
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "fiscalYearStartMonth": 0,
          "graphTooltip": 0,
          "links": [],
          "panels": [
            {
              "datasource": "Prometheus",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 1
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 4,
                "w": 6,
                "x": 0,
                "y": 0
              },
              "id": 1,
              "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "center",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "targets": [
                {
                  "expr": "count(ALERTS{alertstate=\"firing\"})",
                  "refId": "A"
                }
              ],
              "title": "Firing Alerts",
              "type": "stat"
            },
            {
              "datasource": "Prometheus",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "drawStyle": "line",
                    "fillOpacity": 15,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineInterpolation": "linear",
                    "lineWidth": 2,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "never",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "short"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 10,
                "w": 12,
                "x": 6,
                "y": 0
              },
              "id": 2,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true
                },
                "tooltip": {
                  "mode": "single",
                  "sort": "none"
                }
              },
              "targets": [
                {
                  "expr": "increase(kube_pod_container_status_restarts_total[1h])",
                  "refId": "A"
                }
              ],
              "title": "Pod Restart (1h)",
              "type": "timeseries"
            },
            {
              "datasource": "Prometheus",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 1
                      }
                    ]
                  },
                  "unit": "short"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 4,
                "w": 6,
                "x": 18,
                "y": 0
              },
              "id": 3,
              "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "center",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "textMode": "auto"
              },
              "targets": [
                {
                  "expr": "sum(kube_pod_container_status_last_terminated_reason{reason=\"OOMKilled\"})",
                  "refId": "A"
                }
              ],
              "title": "OOM Events (24h)",
              "type": "stat"
            },
            {
              "datasource": "Prometheus",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "max": 1,
                  "min": 0,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "orange",
                        "value": 0.7
                      },
                      {
                        "color": "red",
                        "value": 0.9
                      }
                    ]
                  },
                  "unit": "percentunit"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 6,
                "w": 6,
                "x": 0,
                "y": 4
              },
              "id": 4,
              "options": {
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": true
              },
              "targets": [
                {
                  "expr": "sum(container_memory_working_set_bytes) / sum(container_spec_memory_limit_bytes)",
                  "refId": "A"
                }
              ],
              "title": "Memory Usage / Limit",
              "type": "gauge"
            },
            {
              "datasource": "Prometheus",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [],
                  "max": 1,
                  "min": 0,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "orange",
                        "value": 0.2
                      },
                      {
                        "color": "red",
                        "value": 0.5
                      }
                    ]
                  },
                  "unit": "percentunit"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 6,
                "w": 6,
                "x": 18,
                "y": 4
              },
              "id": 5,
              "options": {
                "displayMode": "gradient",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "orientation": "horizontal",
                "showUnfilled": true
              },
              "targets": [
                {
                  "expr": "sum(rate(container_cpu_cfs_throttled_periods_total[5m])) / sum(rate(container_cpu_cfs_periods_total[5m]))",
                  "refId": "A"
                }
              ],
              "title": "CPU Throttle Rate",
              "type": "bargauge"
            },
            {
              "datasource": "Prometheus",
              "fieldConfig": {
                "defaults": {
                  "mappings": [],
                  "unit": "percentunit"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 8,
                "w": 24,
                "x": 0,
                "y": 10
              },
              "id": 6,
              "options": {
                "showHeader": true
              },
              "targets": [
                {
                  "expr": "kube_deployment_status_replicas_available / kube_deployment_spec_replicas",
                  "format": "table",
                  "instant": true,
                  "refId": "A"
                }
              ],
              "title": "Deployment Replicas",
              "type": "table"
            }
          ],
          "refresh": "30s",
          "schemaVersion": 38,
          "style": "dark",
          "tags": [
            "dr-kube",
            "overview"
          ],
          "templating": {
            "list": []
          },
          "time": {
            "from": "now-6h",
            "to": "now"
          },
          "timepicker": {},
          "timezone": "browser",
          "title": "DR-Kube Overview",
          "uid": "dr-kube-overview",
          "version": 1
        }
# # https://artifacthub.io/packages/helm/grafana/grafana
# global:
#   imageRegistry: null
#   imagePullSecrets: []
# rbac:
#   create: true
#   pspEnabled: false
#   pspUseAppArmor: false
#   namespaced: false
#   extraRoleRules: []
#   extraClusterRoleRules: []
# serviceAccount:
#   create: true
#   name: null
#   nameTest: null
#   labels: {}
#   automountServiceAccountToken: false
# replicas: 1
# headlessService: false
# automountServiceAccountToken: true
# autoscaling:
#   enabled: false
#   minReplicas: 1
#   maxReplicas: 5
#   targetCPU: '60'
#   targetMemory: ''
#   behavior: {}
# podDisruptionBudget: {}
# deploymentStrategy:
#   type: RollingUpdate
# readinessProbe:
#   httpGet:
#     path: /api/health
#     port: 3000
# livenessProbe:
#   httpGet:
#     path: /api/health
#     port: 3000
#   initialDelaySeconds: 60
#   timeoutSeconds: 30
#   failureThreshold: 10
# image:
#   registry: docker.io
#   repository: grafana/grafana
#   tag: ''
#   sha: ''
#   pullPolicy: IfNotPresent
#   pullSecrets: []
# testFramework:
#   enabled: true
#   image:
#     registry: docker.io
#     repository: bats/bats
#     tag: v1.4.1
#   imagePullPolicy: IfNotPresent
#   securityContext: {}
#   containerSecurityContext: {}
#   resources: {}
# dnsPolicy: null
# dnsConfig: {}
# securityContext:
#   runAsNonRoot: true
#   runAsUser: 472
#   runAsGroup: 472
#   fsGroup: 472
# containerSecurityContext:
#   allowPrivilegeEscalation: false
#   capabilities:
#     drop:
#       - ALL
#   seccompProfile:
#     type: RuntimeDefault
# createConfigmap: true
# extraConfigmapMounts: []
#   # - name: certs-configmap
#   #   mountPath: /etc/grafana/ssl/
#   #   subPath: certificates.crt # (optional)
#   #   configMap: certs-configmap
#   #   readOnly: true
#   #   optional: false

# extraEmptyDirMounts: []
#   # - name: provisioning-notifiers
#   #   mountPath: /etc/grafana/provisioning/notifiers

# # Apply extra labels to common labels.
# extraLabels: {}
# downloadDashboardsImage:
#   registry: docker.io
#   repository: curlimages/curl
#   tag: 8.9.1
#   sha: ''
#   pullPolicy: IfNotPresent
# downloadDashboards:
#   env: {}
#   envFromSecret: ''
#   resources: {}
#   securityContext:
#     allowPrivilegeEscalation: false
#     capabilities:
#       drop:
#         - ALL
#     seccompProfile:
#       type: RuntimeDefault
#   envValueFrom: {}
#   #  ENV_NAME:
#   #    configMapKeyRef:
#   #      name: configmap-name
#   #      key: value_key

# ## Pod Annotations
# # podAnnotations: {}

# ## ConfigMap Annotations
# # configMapAnnotations: {}
# # argocd.argoproj.io/sync-options: Replace=true

# ## Pod Labels
# # podLabels: {}

# podPortName: grafana
# gossipPortName: gossip
# service:
#   enabled: true
#   type: ClusterIP
#   ipFamilyPolicy: ''
#   ipFamilies: []
#   loadBalancerIP: ''
#   loadBalancerClass: ''
#   loadBalancerSourceRanges: []
#   port: 80
#   targetPort:
#     3000
#     # targetPort: 4181 To be used with a proxy extraContainer
#   ## Service annotations. Can be templated.
#   annotations: {}
#   labels: {}
#   portName: service
#   appProtocol: ''
#   sessionAffinity: ''
# serviceMonitor:
#   enabled: false
#   path: /metrics
#   labels: {}
#   interval: 30s
#   scheme: http
#   tlsConfig: {}
#   scrapeTimeout: 30s
#   relabelings: []
#   metricRelabelings: []
#   basicAuth: {}
#   targetLabels: []
# extraExposePorts: []
#   # - name: keycloak
#   #   port: 8080
#   #   targetPort: 8080

# # overrides pod.spec.hostAliases in the grafana deployment's pods
# hostAliases: []
# # ingress:
# #   enabled: true
# #   ingressClassName: nginx
# #   annotations: {}
# #   labels: {}
# #   path: /
# #   pathType: Prefix
# #   hosts:
# #   - grafana.drkube.shop
# #   extraPaths: []
# #   tls: []
# route:
#   main:
#     enabled: false
#     apiVersion: gateway.networking.k8s.io/v1
#     kind: HTTPRoute
#     annotations: {}
#     labels: {}
#     hostnames: []
#     parentRefs: []
#     matches:
#     - path:
#         type: PathPrefix
#         value: /
#     filters: []
#     additionalRules: []
# resources:
#   limits:
#     memory: 1740Mi
#   requests:
#     memory: 768Mi
# nodeSelector: {}
# tolerations: []
# affinity: {}
# topologySpreadConstraints: []
# extraInitContainers: []
# extraContainers: ''
# extraContainerVolumes: []
# persistence:
#   type: pvc
#   enabled: true
#   storageClassName: csi-storageclass
#   volumeName: ''
#   accessModes:
#   - ReadWriteOnce
#   size: 10Gi
#   finalizers:
#   - kubernetes.io/pvc-protection
#   extraPvcLabels: {}
#   disableWarning: false
#   inMemory:
#     enabled: false
#   lookupVolumeName: true
# initChownData:
#   ## If false, data ownership will not be reset at startup
#   ## This allows the grafana-server to be run with an arbitrary user
#   ##
#   enabled:
#     false ## Prometheus ÏÑ§Ï†ï „ÖÇÎ∞òÏòÅÌïòÎäîÍ≤ÉÎïåÎ¨∏ÏóêÎ≥Ä
#     #üëâ 99% ÌôïÎ•†Î°ú Ïù¥ Ï°∞Ìï©
#     #
#     #‚úî persistence.enabled=true
#     #‚úî PVC / PV (NFS, hostPath, Longhorn Îì±)
#     #‚úî Ìï¥Îãπ Ïä§ÌÜ†Î¶¨ÏßÄÍ∞Ä chown ÏùÑ ÌóàÏö© Ïïà Ìï®
#     #
#     #Prometheus datasourceÎ•º Ï∂îÍ∞ÄÌïòÎ©¥ÏÑú:
#     #
#     #Grafana provisioning ÌååÏùº ÏàòÍ∞Ä ÎäòÍ≥†
#     #
#     #/var/lib/grafana Ï†ëÍ∑º ÏãúÏ†êÏù¥ Î∞îÎÄåÍ±∞ÎÇò
#     #
#     #init containerÍ∞Ä Îã§Ïãú ÌôúÏÑ±ÌôîÎê®
#     #
#     #‚û°Ô∏è Ïû†Ïû¨Îèº ÏûàÎçò Í∂åÌïú Î¨∏Ï†úÍ∞Ä ÎìúÎü¨ÎÇú Í≤É

#   ## initChownData container image
#   ##
#   image:
#     registry: docker.io
#     repository: library/busybox
#     tag: 1.31.1
#     sha: ''
#     pullPolicy: IfNotPresent
#   resources: {}
#   securityContext:
#     readOnlyRootFilesystem: false
#     runAsNonRoot: false
#     runAsUser: 0
#     seccompProfile:
#       type: RuntimeDefault
#     capabilities:
#       add:
#       - CHOWN
#       drop:
#       - ALL
# adminUser: admin
# adminPassword: drkube
# admin:
#   existingSecret: ''
#   userKey: admin-user
#   passwordKey: admin-password
# env: {}
# envValueFrom: {}
# envFromSecret: ''
# envRenderSecret: {}
# envFromSecrets: []
# envFromConfigMaps: []
# enableServiceLinks: true
# extraSecretMounts: []
# extraVolumeMounts: []
# extraVolumes: []
# lifecycleHooks: {}
# plugins: []
# datasources:
#   datasources.yaml:
#     apiVersion: 1
#     datasources:
#       # Loki ÏÑ§Ï†ï
#       - name: Loki
#         type: loki
#         url: http://loki:3100
#         access: proxy
#       - name: Prometheus
#         type: prometheus
#         url: http://prometheus-server
#         access: proxy

# ## Configure grafana alerting (can be templated)
# ## ref: https://docs.grafana.com/alerting/set-up/provision-alerting-resources/file-provisioning/
# ##
# alerting: {}
# notifiers: {}
# dashboardProviders:
#   dashboardproviders.yaml:
#     apiVersion: 1
#     providers:
#       - name: "default"
#         orgId: 1
#         folder: ""
#         type: file
#         disableDeletion: false
#         editable: true
#         options:
#           path: /var/lib/grafana/dashboards/default

# ## Configure how curl fetches remote dashboards. The beginning dash is required.
# ## NOTE: This sets the default short flags for all dashboards, but these
# ##       defaults can be overridden individually for each dashboard by setting
# ##       curlOptions. See the example dashboards section below.
# ##
# ## -s  - silent mode
# ## -k  - allow insecure (eg: non-TLS) connections
# ## -f  - fail fast
# ## See the curl documentation for additional options
# ##
# defaultCurlOptions: "-skf"

# ## Configure grafana dashboard to import
# ## NOTE: To use dashboards you must also enable/configure dashboardProviders
# ## ref: https://grafana.com/dashboards
# ##
# ## dashboards per provider, use provider name as key.
# ##
# dashboards:
#   default:
#     kubernetes-overview:
#       gnetId: 315
#       revision: 3
#       datasource: Prometheus
#     node-exporter:
#       gnetId: 1860
#       revision: 37
#       datasource: Prometheus
#     kubernetes-cluster-monitoring:
#       gnetId: 7249
#       revision: 1
#       datasource: Prometheus
#     kubernetes-pods:
#       gnetId: 6417
#       revision: 1
#       datasource: Prometheus
# dashboardsConfigMaps: {}
# grafana.ini:
#   paths:
#     data: /var/lib/grafana/
#     logs: /var/log/grafana
#     plugins: /var/lib/grafana/plugins
#     provisioning: /etc/grafana/provisioning
#   analytics:
#     check_for_updates: true
#   log:
#     mode: console
#   grafana_net:
#     url: https://grafana.net
#   server:
#     domain: "{{ if (and .Values.ingress.enabled .Values.ingress.hosts) }}{{ tpl (.Values.ingress.hosts | first) . }}{{ else }}''{{ end }}"
# ## grafana Authentication can be enabled with the following values on grafana.ini
# # server:
# # The full public facing url you use in browser, used for redirects and emails
# #    root_url:
# # https://grafana.com/docs/grafana/latest/auth/github/#enable-github-in-grafana
# # auth.github:
# #    enabled: false
# #    allow_sign_up: false
# #    scopes: user:email,read:org
# #    auth_url: https://github.com/login/oauth/authorize
# #    token_url: https://github.com/login/oauth/access_token
# #    api_url: https://api.github.com/user
# #    team_ids:
# #    allowed_organizations:
# #    client_id:
# #    client_secret:
# ## LDAP Authentication can be enabled with the following values on grafana.ini
# ## NOTE: Grafana will fail to start if the value for ldap.toml is invalid
# # auth.ldap:
# #   enabled: true
# #   allow_sign_up: true
# #   config_file: /etc/grafana/ldap.toml
# ## Grafana's alerting configuration
# # unified_alerting:
# #   enabled: true
# #   rule_version_record_limit: "5"

# ## Grafana's LDAP configuration
# ## Templated by the template in _helpers.tpl
# ## NOTE: To enable the grafana.ini must be configured with auth.ldap.enabled
# ## ref: http://docs.grafana.org/installation/configuration/#auth-ldap
# ## ref: http://docs.grafana.org/installation/ldap/#configuration
# ldap:
#   enabled: false
#   existingSecret: ''
#   config: ''
# shareProcessNamespace: false
# smtp:
#   existingSecret: ''
#   userKey: user
#   passwordKey: password
# sidecar:
#   image:
#     registry: quay.io
#     repository: kiwigrid/k8s-sidecar
#     tag: 2.1.2
#     sha: ''
#   imagePullPolicy: IfNotPresent
#   resources: {}
#   #   limits:
#   #     cpu: 100m
#   #     memory: 100Mi
#   #   requests:
#   #     cpu: 50m
#   #     memory: 50Mi
#   securityContext:
#     allowPrivilegeEscalation: false
#     capabilities:
#       drop:
#         - ALL
#     seccompProfile:
#       type: RuntimeDefault
#   enableUniqueFilenames: false
#   readinessProbe: {}
#   livenessProbe: {}
#   alerts:
#     enabled: false
#     env: {}
#     envValueFrom: {}
#     label: grafana_alert
#     labelValue: ''
#     searchNamespace: null
#     watchMethod: WATCH
#     resource: both
#     resourceName: ''
#     reloadURL: http://localhost:3000/api/admin/provisioning/alerting/reload
#     script: null
#     skipReload: false
#     initAlerts: false
#     extraMounts: []
#     sizeLimit: ''
#   dashboards:
#     enabled: false
#     env: {}
#     envValueFrom: {}
#     SCProvider: true
#     label: grafana_dashboard
#     labelValue: ''
#     folder: /tmp/dashboards
#     defaultFolderName: null
#     searchNamespace: null
#     watchMethod: WATCH
#     resource: both
#     folderAnnotation: null
#     resourceName: ''
#     reloadURL: http://localhost:3000/api/admin/provisioning/dashboards/reload
#     script: null
#     skipReload: false
#     initDashboards: false
#     provider:
#       name: sidecarProvider
#       orgid: 1
#       # folder in which the dashboards should be imported in grafana
#       folder: ""
#       # <string> folder UID. will be automatically generated if not specified
#       folderUid: ""
#       # type of the provider
#       type: file
#       disableDelete: false
#       allowUiUpdates: false
#       foldersFromFilesStructure: false
#     extraMounts: []
#     sizeLimit: ''
#   datasources:
#     enabled: false
#     env: {}
#     envValueFrom: {}
#     label: grafana_datasource
#     labelValue: ''
#     searchNamespace: null
#     watchMethod: WATCH
#     resource: both
#     resourceName: ''
#     reloadURL: http://localhost:3000/api/admin/provisioning/datasources/reload
#     script: null
#     skipReload: false
#     initDatasources: false
#     extraMounts: []
#     sizeLimit: ''
#   plugins:
#     enabled: false
#     env: {}
#     label: grafana_plugin
#     labelValue: ''
#     searchNamespace: null
#     watchMethod: WATCH
#     resource: both
#     resourceName: ''
#     reloadURL: http://localhost:3000/api/admin/provisioning/plugins/reload
#     script: null
#     skipReload: false
#     initPlugins: false
#     extraMounts: []
#     sizeLimit: ''
#   notifiers:
#     enabled: false
#     env: {}
#     label: grafana_notifier
#     labelValue: ''
#     searchNamespace: null
#     watchMethod: WATCH
#     resource: both
#     resourceName: ''
#     reloadURL: http://localhost:3000/api/admin/provisioning/notifications/reload
#     script: null
#     skipReload: false
#     initNotifiers: false
#     extraMounts: []
#     sizeLimit: ''
# namespaceOverride: ''
# revisionHistoryLimit: 10
# imageRenderer:
#   deploymentStrategy: {}
#   enabled: false
#   replicas: 1
#   autoscaling:
#     enabled: false
#     minReplicas: 1
#     maxReplicas: 5
#     targetCPU: '60'
#     targetMemory: ''
#     behavior: {}
#   serverURL: ''
#   renderingCallbackURL: ''
#   image:
#     registry: docker.io
#     repository: grafana/grafana-image-renderer
#     tag: latest
#     sha: ''
#     pullSecrets: []
#     pullPolicy: Always
#   env:
#     HTTP_HOST: 0.0.0.0
#     XDG_CONFIG_HOME: /tmp/.chromium
#     XDG_CACHE_HOME: /tmp/.chromium
#   envValueFrom: {}
#   serviceAccountName: ''
#   automountServiceAccountToken: false
#   securityContext: {}
#   containerSecurityContext:
#     seccompProfile:
#       type: RuntimeDefault
#     capabilities:
#       drop: ["ALL"]
#     allowPrivilegeEscalation: false
#     readOnlyRootFilesystem: true
#   podAnnotations: {}
#   hostAliases: []
#   # image-renderer deployment priority class
#   priorityClassName: ""
#   service:
#     enabled: true
#     # image-renderer service port name
#     portName: "http"
#     # image-renderer service port used by both service and deployment
#     port: 8081
#     targetPort: 8081
#     appProtocol: ''
#   serviceMonitor:
#     enabled: false
#     path: /metrics
#     labels: {}
#     interval: 1m
#     scheme: http
#     tlsConfig: {}
#     scrapeTimeout: 30s
#     relabelings: []
#     targetLabels: []
#   grafanaProtocol: http
#   grafanaSubPath: ''
#   podPortName: http
#   revisionHistoryLimit: 10
#   networkPolicy:
#     limitIngress: true
#     limitEgress: false
#     extraIngressSelectors: []
#   resources: {}
#   #   limits:
#   #     cpu: 100m
#   #     memory: 100Mi
#   #   requests:
#   #     cpu: 50m
#   #     memory: 50Mi
#   ## Node labels for pod assignment
#   ## ref: https://kubernetes.io/docs/user-guide/node-selection/
#   #
#   nodeSelector: {}
#   tolerations: []
#   affinity: {}
#   extraConfigmapMounts: []
#   extraSecretMounts: []
#   extraVolumeMounts: []
#   extraVolumes: []
# networkPolicy:
#   enabled: false
#   ingress: true
#   allowExternal: true
#   explicitNamespacesSelector: {}
#   egress:
#     enabled: false
#     blockDNSResolution: false
#     ports: []
#     to: []
# enableKubeBackwardCompatibility: false
# useStatefulSet: false
# extraObjects: []
# assertNoLeakedSecrets: true
